{% extends 'baseuser.html' %}

{% block title %}主菜選択{% endblock %}

{% block content %}
    <div class="container">
        <!-- Main Meal Selection Section -->
        <main>
            <div class="meal-selection">
                <h2>主菜選択</h2>
                <!-- 主菜選択フォーム -->
                <form id="dish-form">
                    <label for="dish">主菜を選んでください:</label>
                    <select id="dish" name="dish" required onchange="updateIngredients()">
                        <option value="">選択してください</option>
                        <option value="唐揚げ">唐揚げ</option>
                        <option value="焼き魚">焼き魚</option>
                        <option value="ステーキ">ステーキ</option>
                        <option value="カレー">カレー</option>
                        <option value="パスタ">パスタ</option>
                    </select>
                </form>
                <!-- 材料リスト -->
                <div id="ingredients" class="ingredients-list"><strong>材料:</strong> 主菜を選んでください。</div>
            </div>

            <div class="meal-time-selection">
                <h3>時間帯</h3>
                <p>登録した主菜は以下の時間帯で表示されます。</p>

                <button id="morning-btn" onclick="setMealTime('朝')">朝</button>
                <button id="afternoon-btn" onclick="setMealTime('昼')">昼</button>
                <button id="evening-btn" onclick="setMealTime('晩')">晩</button>

                <div id="meal-status" class="meal-status">
                    <p id="dish-status">主菜は未定です。</p>
                </div>
            </div>

            <div>
                <button onclick="goBack()">戻る</button>
            </div>

            <button class="register">登録</button>
        </main>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        // 主菜ごとの材料データ
        const ingredientsData = {
            "唐揚げ": ["鶏肉", "しょうゆ", "にんにく", "しょうが", "片栗粉"],
            "焼き魚": ["魚（さば、さんま等）", "塩", "レモン"],
            "ステーキ": ["牛肉", "塩", "コショウ", "オリーブオイル"],
            "カレー": ["カレールー", "にんじん", "じゃがいも", "玉ねぎ", "鶏肉"],
            "パスタ": ["パスタ", "トマトソース", "にんにく", "オリーブオイル", "バジル"]
        };

        // 選択した主菜の材料を表示
        function updateIngredients() {
            const dish = document.getElementById("dish").value;
            const ingredientsList = document.getElementById("ingredients");

            // 選択された主菜に応じた材料を取得
            const ingredients = ingredientsData[dish] || [];

            // 材料リストを更新
            ingredientsList.innerHTML = ingredients.length
                ? `<strong>材料:</strong> ${ingredients.join(", ")}`
                : "<strong>材料:</strong> 主菜を選んでください。";
        }

        // 時間帯を選択する関数
        function setMealTime(mealTime) {
            document.getElementById("dish-status").innerText = `主菜は${mealTime}に設定されました。`;
        }

        // 戻るボタンの処理
        function goBack() {
            history.back();
        }
    </script>
{% endblock %}
