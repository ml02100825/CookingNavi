{% extends 'baseuser.html' %}

{% load static %}

{% block title %}自分の投稿{% endblock %}

{% block content %}
<head>
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'css/keijiban/bulletinboard.css' %}">
</head>

<div class="search-bar-container">
    <form method="get" action="{% url 'bbs:MyBulletinBoard' %}">
        <input type="text" name="search_query" placeholder="料理を検索する..." class="search-bar" value="{{ search_query }}">
        <button type="submit" class="search-btn">検索</button>
    </form>
    <a href="{% url 'bbs:Posts' %}">
        <button class="post-btn">レシピを投稿する</button>
    </a>
</div>

<div class="content-container">
    <aside class="sidebar">
        <form method="post" action="{% url 'bbs:MyBulletinBoard' %}">
            {% csrf_token %}
            <input type="hidden" name="show_my_posts" value="{{ show_my_posts|yesno:'False,True' }}">
            <button type="submit">{{ show_my_posts|yesno:'自分以外が投稿したもの,自分が投稿したもの' }}</button>
        </form>
        <button>お気に入り</button>
        <button>いいね数順</button>
    </aside>

    <main class="main-content" id="main-content">
        <!-- 投稿を表示 -->
        {% for bbs_entry in bbs_with_images %}
        <div class="post-card">
            <div class="post-details">
                <h3>{{ bbs_entry.post.name }}</h3>

                <!-- 画像を表示 -->
                {% for image in bbs_entry.images %}
                <img src="{{ image }}" alt="Post image" class="img-fluid mb-3">
                {% endfor %}

                <div class="button-container">
                    <!-- 編集ボタンをリンクに変更 -->
                    <a href="{% url 'bbs:edit' post_id=bbs_entry.post.post_id %}">
                        <button>編集</button>
                    </a>
                    <button onclick="deletePost()">削除</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </main>
</div>
{% endblock %}

{% block scripts %}
<script>
    function deletePost() {
        alert("投稿を削除しました。");
    }
</script>
{% endblock %}